<aside
  id="logo-sidebar"
  class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full 
         bg-gradient-to-b from-indigo-700 via-indigo-800 to-indigo-900 sm:translate-x-0 shadow-xl"
  aria-label="Sidebar"
>
  <!-- Title -->
  <div class="flex items-center justify-center h-20 border-b border-indigo-600 space-x-3">
    <img src="delivery-man.png" alt="Fleet Pulse Logo" class="w-8 h-8 object-contain" />
    <h1 class="text-2xl font-extrabold text-white tracking-wide">Fleet Pulse</h1>
  </div>

  <!-- Navigation -->
  <div class="h-full px-3 pb-4 overflow-y-auto">
    <ul class="space-y-2 font-medium mt-6">
      <li>
        <a href="dashboard.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="ms-3">Dashboard</span>
        </a>
      </li>

      <li>
        <a href="add.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="flex-1 ms-3 whitespace-nowrap">Add Rider</span>
        </a>
      </li>

      <li>
        <a href="assign.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="flex-1 ms-3 whitespace-nowrap">Assign Delivery</span>
          <span id="pending-count" 
                class="inline-flex items-center justify-center w-5 h-5 ms-3 text-xs font-medium text-indigo-900 bg-indigo-200 rounded-full">
            0
          </span>
        </a>
      </li>

      <li>
        <a href="report.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="flex-1 ms-3 whitespace-nowrap">Generate Report</span>
        </a>
      </li>

      <li>
        <a href="expense.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="flex-1 ms-3 whitespace-nowrap">Expense from Bikes</span>
        </a>
      </li>

      <li>
        <a href="maintainance.html" class="nav-link flex items-center p-3 text-indigo-100 rounded-lg hover:bg-indigo-600 transition group">
          <span class="flex-1 ms-3 whitespace-nowrap">Scheduled Maintenance</span>
        </a>
      </li>
    </ul>
  </div>
</aside>

<!-- Scripts -->
<script>
  // Highlight active link based on current page
  document.addEventListener("DOMContentLoaded", () => {
    const currentPage = window.location.pathname.split("/").pop();
    const links = document.querySelectorAll("#logo-sidebar .nav-link");
    links.forEach(link => {
      const linkPage = link.getAttribute("href");
      if (linkPage === currentPage) {
        link.classList.add("bg-blue-600", "text-white");
      } else {
        link.classList.remove("bg-blue-600", "text-white");
      }
    });
  });

  // Update pending deliveries badge
  function updatePendingCount() {
    let entries = JSON.parse(localStorage.getItem('entries')) || [];
    let pending = entries.filter(e => e.status === 'Pending').length;
    const badge = document.getElementById('pending-count');
    if (badge) {
      badge.textContent = pending;
      badge.style.display = pending > 0 ? 'inline-flex' : 'none';
    }
  }

  document.addEventListener("DOMContentLoaded", updatePendingCount);
  window.addEventListener("storage", updatePendingCount);
</script>

