<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Manager</title>
  </head>
  <style>
    .mydash {
      position: relative;
    }
    .myheader {
      position: absolute;
      bottom: 0;
      left: 0;
      z-index: 10;
    }
    .myexpense {
      margin-left: 260px;
      width: 84%;
      text-align: center;
      background-color: rgb(0, 0, 156);
      padding: 3em;
      color: white;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1em;
      box-sizing: border-box;
      margin-top: 2%;
    }
    form {
      display: flex;
      flex-wrap: wrap;
      gap: 40px;
    }
    .inputs1 {
      flex: 1 1 150px;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      color: black;
      box-sizing: border-box;
    }
    .inputs2 {
      flex: 1 1 150px;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      color: black;
      box-sizing: border-box;
    }
    .inputs3 {
      flex: 1 1 150px;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      color: black;
      box-sizing: border-box;
    }
    .inputs4 {
      flex: 1 1 150px;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      color: black;
      box-sizing: border-box;
    }
    .inputs5 {
      flex: 1 1 150px;
      padding: 0.5em;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      color: black;
      box-sizing: border-box;
    }
    button {
      text-align: center;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    table {
      width: 80%;
      padding: -20px;
      border-collapse: collapse;
    }
    .tables {
      margin-left: 20%;
      width: 80%;
    }
    .hd {
      width: 10%;
    }
    tbody {
      width: 100%;
    }
    th,
    td {
      padding: 20px 2px;
      text-align: center;
      border-bottom: 1px solid #ddd;
      width: 50%;
      margin: 0%;
    }
    p {
      padding: 20px 2px;
      text-align: center;
      width: 50%;
      margin: 0%;
    }
    .sign {
      display: none;
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      color: rgb(0, 0, 182);
      border: 2px solid #333;
      padding: 7px;
      font-size: 25px;
      text-align: center;
      z-index: 1000;
    }
    .yess {
      background-color: rgb(0, 0, 182);
      color: white;
      padding: 0.1em;
      width: 50%;
      text-align: center;
      display: block;
      border-color: black;
      margin: auto;
      border: 2px;
      position: relative;
      border-radius: 20px;
      border: 1px solid gray;
      box-shadow: 0 25px 45px rgb(5, 5, 115);
      z-index: 10;
    }
    .noo {
      background-color: rgb(0, 0, 182);
      color: white;
      padding: 0.1em;
      width: 50%;
      text-align: center;
      display: block;
      border-color: black;
      margin: auto;
      border: 2px;
      position: relative;
      border-radius: 20px;
      border: 1px solid gray;
      box-shadow: 0 25px 45px rgb(5, 5, 115);
      z-index: 10;
    }
    .text {
      display: flex;
    }
  </style>

  <body>
    <nav
      class="fixed top-0 z-50 w-full bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700"
    >
      <div class="px-3 py-3 lg:px-5 lg:pl-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center justify-start rtl:justify-end">
            <button
              data-drawer-target="logo-sidebar"
              data-drawer-toggle="logo-sidebar"
              aria-controls="logo-sidebar"
              type="button"
              class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
            >
              <span class="sr-only">Open sidebar</span>
              <svg
                class="w-6 h-6"
                aria-hidden="true"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  clip-rule="evenodd"
                  fill-rule="evenodd"
                  d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"
                ></path>
              </svg>
            </button>
            <a
              class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0"
            >
              <div>
                <img
                  src="pulsefleet-logo.png"
                  alt=""
                  class="w-10 h-10 p-none rounded-full"
                />
              </div>
              <span class="ml-3 text-xl text-gray-100"
                >Fleet
                <span class="text-blue-800 font-bold text-2xl"
                  >Pulse</span
                ></span
              >
            </a>
          </div>
          <nav
            class="md:ml-auto flex flex-wrap items-center text-base justify-center"
          >
            <a
              href="index.html"
              id="home"
              class="mr-5 p-2 rounded-2xl transition-transform duration-300 ease-in-out hover:-translate-y-2"
              >Home</a
            >
            <a
              href="manager.html"
              class="mr-5 p-2 rounded-2xl duration-300 ease-in-out hover:-translate-y-2 text-gray-100 bg-blue-700"
              >Fleet manager</a
            >
            <!-- <a href="login.html"
              class="mr-5 rounded-2xl transition-transform duration-300 ease-in-out hover:-translate-y-2"
              >Sign-out</a
            > -->
            <a href="login.html">
              <button
                id="signout"
                class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0"
              >
                Sign-out
                <svg
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  class="w-4 h-4 ml-1"
                  viewBox="0 0 24 24"
                >
                  <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
              </button>
            </a>
          </nav>
        </div>
      </div>
    </nav>
    <div id="confirm" class="sign">
      <p class="text">Are you sure you want to sign out?</p>
      <button id="yesBtn" class="yess">Yes</button><br />
      <button id="noBtn" class="noo">No</button>
    </div>

    <aside
      id="logo-sidebar"
      class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0 dark:bg-gray-800 dark:border-gray-700"
      aria-label="Sidebar"
    >
      <div class="h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800">
        <ul class="space-y-2 font-medium">
          <li>
            <a
              href="dashboard.html"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <svg
                class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 22 21"
              >
                <path
                  d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"
                />
                <path
                  d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"
                />
              </svg>
              <span class="ms-3">Dashboard</span>
            </a>
          </li>

          <li>
            <a
              href="add.html"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <div class="w-5 h-5"><img src="plus.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap">Add rider</span>
            </a>
          </li>

          <li>
            <a
              href="assign.html"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <div class="w-5 h-5"><img src="delivery-man.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap">Assign delivery</span>
              <span
                class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-300"
                >3</span
              >
            </a>
          </li>

          <li>
            <a
              href="report.html"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <div class="w-5 h-5"><img src="data-analytics.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap">Generate report</span>
            </a>
          </li>

          <li>
            <a
              href="#"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <div class="w-5 h-5"><img src="track.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap">Track rider</span>
            </a>
          </li>

          <li>
            <a
              href="expense.html"
              class="flex items-center p-2 text-gray-100 rounded-lg dark:text-white bg-blue-700 group"
            >
              <div class="w-5 h-5"><img src="cash-flow.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap"
                >Expense from bikes</span
              >
            </a>
          </li>

          <li>
            <a
              href="maintainance.html"
              class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
            >
              <div class="w-5 h-5"><img src="tools.png" alt="" /></div>
              <span class="flex-1 ms-3 whitespace-nowrap"
                >Scheduled maintenance</span
              >
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <br /><br /><br />

    <div class="myexpense">
      <form action="" id="expenses">
        <div class="input1">
          <label for="plates">Bike plates</label><br />
          <input
            type="text"
            id="username"
            name="username"
            placeholder="KMFB 571K"
            class="text-gray-900"
          /><br /><br />
        </div>
        <div class="input2">
          <label for="name">Riders name</label><br />
          <input
            type="text"
            id="name"
            name="name"
            placeholder="John Doe"
            class="text-gray-900"
          /><br /><br />
        </div>
        <div class="input3">
          <label for="expense" class="headings">Expense</label><br />
          <select name="expense" id="expense" class="text-gray-900">
            <option value="select" class="text-gray-900">Select</option>
            <option value="fuel" class="text-gray-900">Fuel</option>
            <option value="Service" class="text-gray-900">Service</option>
            <option value="carwash" class="text-gray-900">Car wash</option>
            <option value="repair" class="text-gray-900">Repair</option>
          </select>
        </div>
        <div class="input4">
          <label for="date">Date</label><br />
          <input type="date" id="date" name="date" class="text-gray-900" />
        </div>
        <div class="input5">
          <label for="amount">Amount</label><br />
          <input type="text" id="amount" name="amount" class="text-gray-900" />
        </div>
        <div class="inputs6" class="headings">
          <button
            type="submit"
            class="bg-sky-500 hover:bg-sky-800 hover:text-white p-2 py-2 mb-4 text-center"
            id="button"
          >
            Add expense
          </button>
        </div>
      </form>
    </div>
    <br /><br />

    <div class="tables">
      <table>
        <thead>
          <tr>
            <th class="hd">Bike plates</th>
            <th class="hd">Rider</th>
            <th class="hd">Expense</th>
            <th class="hd">Date</th>
            <th class="hd">Amount</th>
          </tr>
        </thead>
        <tbody id="table-body" class="mybody"></tbody>
      </table>
    </div>
    <p id="balance-display" class="text-xl font-bold mt-4">
      Total <span class="text-blue-700">Expense</span>: KES 0.00
    </p>
  </body>

  <script>
    const form = document.getElementById("expenses");
    const platesInput = document.getElementById("username");
    const riderInput = document.getElementById("name");
    const expenseInput = document.getElementById("expense");
    const dateInput = document.getElementById("date");
    const amountInput = document.getElementById("amount");
    const tableBody = document.getElementById("table-body");
    const balanceDisplay = document.getElementById("balance-display");
    const signoutInput = document.getElementById("signout");
    const confirmInput = document.getElementById("confirm");
    const yesInput = document.getElementById("yesBtn");
    const noInput = document.getElementById("noBtn");
    const homeInput = document.getElementById("home");

    homeInput.addEventListener("click", (e) => {
      e.preventDefault();
      confirmInput.style.display = "block";
      {
        yesInput.addEventListener("click", (e) => {
          e.preventDefault();
          window.location.href = "index.html";
        });
        noInput.addEventListener("click", (e) => {
          e.preventDefault();
          confirmInput.style.display = "none";
        });
      }
    });

    signoutInput.addEventListener("click", (e) => {
      e.preventDefault();
      confirmInput.style.display = "block";
    });

    yesInput.addEventListener("click", (e) => {
      e.preventDefault();
      window.location.href = "login.html";
    });

    noInput.addEventListener("click", (e) => {
      e.preventDefault();
      confirmInput.style.display = "none";
    });

    let totalBalance = 0;

    function updateBalance() {
      balanceDisplay.innerHTML = `Total <span class="blue-text">Expense</span>: KES ${totalBalance.toFixed(
        2
      )}`;
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const plates = platesInput.value.trim();
      const rider = riderInput.value.trim();
      const expense = expenseInput.value.trim();
      const date = dateInput.value.trim();
      const amount = Number(amountInput.value.trim());

      if (!plates || !rider || expense === "select" || !date || isNaN(amount)) {
        alert("Please fill all the inputs");
        return;
      }

      const row = document.createElement("tr");

      const platesCell = document.createElement("td");
      platesCell.textContent = plates;
      platesCell.className = "text-gray-900 font-bold text-sm";
      row.appendChild(platesCell);

      const riderCell = document.createElement("td");
      riderCell.textContent = rider;
      riderCell.className = "text-gray-900 font-bold text-sm";
      row.appendChild(riderCell);

      const expenseCell = document.createElement("td");
      expenseCell.textContent = expense;
      expenseCell.className = "text-gray-900 font-bold text-sm";
      row.appendChild(expenseCell);

      const dateCell = document.createElement("td");
      dateCell.textContent = date;
      dateCell.className = "text-gray-900 font-bold text-sm";
      row.appendChild(dateCell);

      const amountCell = document.createElement("td");
      amountCell.textContent = amount;
      amountCell.className = "text-red-600 font-bold text-sm";
      row.appendChild(amountCell);

      const newTotal = totalBalance + amount;

      if (newTotal >= 100000) {
        alert("You have reached your maximum spend for the month");
        return;
      }

      totalBalance = newTotal;
      updateBalance();

      const actionCell = document.createElement("td");
      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "Delete";
      deleteBtn.className =
        "bg-red-500 text-white px-2 py-1 rounded hover:bg-red-700";

      deleteBtn.addEventListener("click", () => {
        totalBalance -= amount;
        updateBalance();
        tableBody.removeChild(row);
      });

      actionCell.appendChild(deleteBtn);
      row.appendChild(actionCell);

      tableBody.appendChild(row);

      form.reset();
    });
  </script>
</html>
